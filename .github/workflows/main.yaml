name: Cypress Tests

on:
  push:
    branches: ['main']
  pull_request:
    branches: ['main']

jobs:
  cypress-run:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - name: Cypress run with env
        uses: cypress-io/github-action@v6
        env:
          MONGODB_URI: ${{ secrets.MONGODB_URI }} 
      - name: Install Backend Modules
        uses: cypress-io/github-action@v6
        with: 
          install-command:  npm run install:backend
          runTests: false
      # - name: Install Frontend modules
      #   uses: cypress-io/github-action@v6
      #   with:
      #     install-command: npm run install:frontend
      #     runTests: false
      # - name: Run E2E tests ðŸ§ª
      #   uses: cypress-io/github-action@v6
      #   with:
      #     start: npm start, npm run client
      #     # wait-on: 'http://localhost:5000, http://localhost:3000'
      #     command: npm run test